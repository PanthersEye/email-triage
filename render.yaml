services:
- type: web
  name: email-triage-api
  env: python
  plan: free
  buildCommand: pip install -r requirements.txt
  startCommand: uvicorn app.main:app --host 0.0.0.0 --port 10000 --workers 2
  preDeployCommand: python scripts/create_schema.py
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: email-triage-db
      property: connectionString
databases:
- name: email-triage-db
  plan: free
